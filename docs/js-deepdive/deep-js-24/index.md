---
title: '24. í´ë¡œì €'
description: ''
date: 2024-08-23
update: 2024-08-23
tags:
  - Javascript
series: 'ëª¨ë˜ ìë°”ìŠ¤í¬ë¦½íŠ¸ Deep Dive'
---

- ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ë ‰ì‹œì»¬ ìŠ¤ì½”í”„ë¥¼ ë”°ë¥´ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì´ë‹¤.
- í•¨ìˆ˜ê°€ ì¤‘ì²©ë˜ì–´ ìˆìœ¼ë©´ ì¤‘ì²©í•¨ìˆ˜ëŠ” ì™¸ë¶€í•¨ìˆ˜ì˜ ë³€ìˆ˜ì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

### 24.1 ë ‰ì‹œì»¬ ìŠ¤ì½”í”„

---

> ìë°”ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì€ í•¨ìˆ˜ë¥¼ **ì–´ë””ì„œ í˜¸ì¶œí–ˆëŠ”ì§€**ê°€ ì•„ë‹ˆë¼
> `í•¨ìˆ˜ë¥¼ ì–´ë””ì— ì •ì˜í–ˆëŠ”ì§€`ì— ë”°ë¼ `ìƒìœ„ìŠ¤ì½”í”„`ë¥¼ ê²°ì •í•œë‹¤. ì´ë¥¼ `ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(ì •ì ìŠ¤ì½”í”„)`ë¼ í•œë‹¤.

### 24.2 í•¨ìˆ˜ ê°ì²´ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ [[Environment]]

---

- í•¨ìˆ˜ëŠ” ìì‹ ì˜ ë‚´ë¶€ ìŠ¬ë¡¯ [[Environment]]ì— ìì‹ ì´ ì •ì˜ëœ í™˜ê²½, ì¦‰ **ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì°¸ì¡°**ë¥¼ ì €ì¥í•œë‹¤.
- ì´ëŠ” í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°€ë¦¬í‚¨ë‹¤.

#### í•¨ìˆ˜ ì½”ë“œ í‰ê°€ ìˆœì„œ

```cs
1. í•¨ìˆ˜ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ ìƒì„±
2. í•¨ìˆ˜ ë ‰ì‹œì»¬ í™˜ê²½ ìƒì„±
2.1. í•¨ìˆ˜ í™˜ê²½ ë ˆì½”ë“œ ìƒì„±
2.2. this ë°”ì¸ë”©
2.3. ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡° ê²°ì •
```

### 24.3 í´ë¡œì €ì™€ ë ‰ì‹œì»¬ í™˜ê²½

---

```cs
const x = 1;

// 1ï¸âƒ£
function outer() {
  const x = 10;
  const inner = function() { console.log(x); }; // 2ï¸âƒ£
  return inner;
}

const innerFunc = outer(); // 3ï¸âƒ£
innerFunc(); // 4ï¸âƒ£
```

- 1ï¸âƒ£ outer í•¨ìˆ˜ê°€ í‰ê°€ë˜ì–´ í•¨ìˆ˜ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ [[Environment]] ë‚´ë¶€ ìŠ¬ë¡¯ì— ìƒìœ„ ìŠ¤ì½”í”„ë¡œì„œ ì €ì¥í•œë‹¤.
- 2ï¸âƒ£ ì´í›„ ì¤‘ì²©í•¨ìˆ˜ innerê°€ í‰ê°€ëœë‹¤. (innerí•¨ìˆ˜ëŠ” í•¨ìˆ˜í‘œí˜„ì‹ìœ¼ë¡œ ì •ì˜í–ˆê¸° ë•Œë¬¸ì— ëŸ°íƒ€ì„ì— í‰ê°€ëœë‹¤.) ì´ë•Œ ì¤‘ì²©í•¨ìˆ˜ InnerëŠ” ìì‹ ì˜ [[Environment]] ë‚´ë¶€ ìŠ¬ë¡¯ì— í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬ í™˜ê²½, ì¦‰ outer í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì„ ìƒìœ„ ìŠ¤ì½”í”„ë¡œì„œ ì €ì¥í•œë‹¤.
- 3ï¸âƒ£ outerí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ outerí•¨ìˆ˜ëŠ” ì¤‘ì²©í•¨ìˆ˜ innerë¥¼ ë°˜í™˜í•˜ê³  ìƒëª…ì£¼ê¸°ë¥¼ ë§ˆê°í•œë‹¤.
  - ì¦‰, outer í•¨ìˆ˜ì˜ ì‹¤í–‰ì´ ì¢…ë£Œë˜ë©´ í•¨ìˆ˜ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ëŠ” ìŠ¤íƒì—ì„œ ì œê±°ëœë‹¤.
  - ì´ë•Œ outerí•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ê¹Œì§€ ì†Œë©¸í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.
  - outer í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì€ innerí•¨ìˆ˜ì˜ [[Environment]] ë‚´ë¶€ ìŠ¬ë¡¯ì— ì˜í•´ ì°¸ì¡°ë˜ê³  ìˆê³ , innerí•¨ìˆ˜ëŠ” ì „ì—­ë³€ìˆ˜ innerFuncì— ì˜í•´ ì°¸ì¡°ë˜ê³  ìˆìœ¼ë¯€ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤. ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì€ ëˆ„êµ°ê°€ ì°¸ì¡°í•˜ëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì„ í•¨ë¶€ë¡œ í•´ì œí•˜ì§€ ì•ŠëŠ”ë‹¤.
- 4ï¸âƒ£ ì´ë•Œ outerí•¨ìˆ˜ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ì œê±°ë˜ì—ˆìœ¼ë¯€ë¡œ, outer ë³€ìˆ˜ì˜ ì§€ì—­ë³€ìˆ˜ xì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì´ ì—†ì–´ë³´ì¸ë‹¤.
  - í•˜ì§€ë§Œ 4ï¸âƒ£ë¥¼ ì‹¤í–‰í•˜ë©´, ìƒëª…ì£¼ê¸°ê°€ ì¢…ë£Œë˜ì—ˆìŒì—ë„ ì§€ì—­ë³€ìˆ˜ xì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.
  - innerí•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´, innerí•¨ìˆ˜ì˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ê°€ ìƒì„±ë˜ê³ , ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ ìŠ¤íƒì— í‘¸ì‹œëœë‹¤.
  - ê·¸ë¦¬ê³  ë ‰ì‹œì»¬ í™˜ê²½ì˜ ì™¸ë¶€ ë ‰ì‹œì»¬ í™˜ê²½ì— ëŒ€í•œ ì°¸ì¡°ëŠ” Inner í•¨ìˆ˜ ê°ì²´ì˜ [[Environment]] ë‚´ë¶€ ìŠ¬ë¡¯ì— ì €ì¥ë˜ì–´ ìˆëŠ” ì°¸ì¡°ê°’ì´ í• ë‹¹ëœë‹¤.

ì´ì²˜ëŸ¼ **ì™¸ë¶€ í•¨ìˆ˜ë³´ë‹¤ ì¤‘ì²©í•¨ìˆ˜ê°€ ë” ì˜¤ë˜ ìœ ì§€ë˜ëŠ” ê²½ìš°**, **ì¤‘ì²©í•¨ìˆ˜ëŠ” ì´ë¯¸ ìƒëª…ì£¼ê¸°ê°€ ì¢…ë£Œí•œ ì™¸ë¶€í•¨ìˆ˜ì˜ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.**
ì´ëŸ¬í•œ ì¤‘ì²©í•¨ìˆ˜ë¥¼ `í´ë¡œì €`ë¼ê³  ë¶€ë¥¸ë‹¤.

---

> í´ë¡œì €ëŠ” í•¨ìˆ˜ì™€ ê·¸ **í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½**ê³¼ì˜ ì¡°í•©ì´ë‹¤.

- **í•¨ìˆ˜ê°€ ì„ ì–¸ëœ ë ‰ì‹œì»¬ í™˜ê²½**: í•¨ìˆ˜ê°€ ì •ì˜ëœ ìœ„ì¹˜ì˜ ìŠ¤ì½”í”„, ì¦‰ `ìƒìœ„ ìŠ¤ì½”í”„`ë¥¼ ì˜ë¯¸í•˜ëŠ” `ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬ í™˜ê²½`ì„ ë§í•œë‹¤.

- ìë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  í•¨ìˆ˜ëŠ” ìì‹ ì˜ ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•œë‹¤.
- ëª¨ë“  í•¨ìˆ˜ê°€ ê¸°ì–µí•˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ í˜¸ì¶œí•˜ë“  ìƒê´€ì—†ì´ ìœ ì§€ëœë‹¤.
- ë”°ë¼ì„œ í•¨ìˆ˜ë¥¼ ì–´ë””ì„œ í˜¸ì¶œí•˜ë“  ìƒê´€ì—†ì´ í•¨ìˆ˜ëŠ” ì–¸ì œë‚˜ ìì‹ ì´ ê¸°ì–µí•˜ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆìœ¼ë©° ì‹ë³„ìì— ë°”ì¸ë”©ëœ ê°’ì„ ë³€ê²½í•  ìˆ˜ë„ ìˆë‹¤.

```cs
// í´ë¡œì €ì— í•´ë‹¹í•˜ëŠ” ê²½ìš°
1. ì¤‘ì²©í•¨ìˆ˜ì´ê³ 
2. í•´ë‹¹ í•¨ìˆ˜ê°€ ìƒìœ„ í•¨ìˆ˜ë³´ë‹¤ ì˜¤ë˜ ë‚¨ì•„ ìˆìœ¼ë©°
3. ìƒìœ„ í•¨ìˆ˜ì˜ ì‹ë³„ìë¥¼ ì°¸ì¡°í•˜ê³  ìˆëŠ”ê²½ìš°
```

- í´ë¡œì €ëŠ” ìƒìœ„ ìŠ¤ì½”í”„ë¥¼ ê¸°ì–µí•´ì•¼ í•˜ë¯€ë¡œ ë¶ˆí•„ìš”í•œ ë©”ëª¨ë¦¬ ì ìœ ë¥¼ ê±±ì •í•  ìˆ˜ë„ ìˆë‹¤.
- í•˜ì§€ë§Œ ìƒìœ„ ìŠ¤ì½”í”„ì˜ ì‹ë³„ì ì¤‘ì—ì„œ ê¸°ì–µí•´ì•¼ í•  ì‹ë³„ìë§Œ ê¸°ì–µí•˜ë„ë¡ ìµœì í™” ë˜ì–´ìˆë‹¤.

### 24.4 í´ë¡œì €ì˜ í™œìš©

---

> í´ë¡œì €ë¥¼ `ìƒíƒœ(state)`ë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
> ì¦‰, ìƒíƒœê°€ ì˜ë„ì¹˜ ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ **ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ì€ë‹‰**í•˜ê³  **íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœë¥¼ í—ˆìš©**í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

```cs
// âŒ ì•ˆì „í•˜ì§€ ì•Šì€ í•¨ìˆ˜
// 1. num ë³€ìˆ˜ëŠ” ëˆ„êµ¬ë‚˜ ì ‘ê·¼í•  ìˆ˜ ìˆê³  ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
// ë”°ë¼ì„œ numì€ increase í•¨ìˆ˜ë§Œì´ ë³€ê²½í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.

let num = 0;

const increase = function () {
  return ++num;
};

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

```cs
// âœ…
// 1. num ë³€ìˆ˜ì— ì ‘ê·¼ì´ ë¶ˆê°€í•˜ê²Œ í•œë‹¤.
// 2. í´ë¡œì €ë¥¼ ì´ìš©í•´ numì´ ì´ì „ numì„ ê°€ì§€ê³  ìˆë„ë¡ í•œë‹¤. (í•¨ìˆ˜ í˜¸ì¶œì‹œ ë§ˆë‹¤ ì´ˆê¸°í™” ë˜ì§€ ì•Šë„ë¡)

const increase = (function () {
  let num = 0;

  // í´ë¡œì €
  return function () {
    return ++num;
  }
}());

console.log(increase()); // 1
console.log(increase()); // 2
console.log(increase()); // 3
```

- ìƒíƒœê°€ ì˜ë„ì¹˜ì•Šê²Œ ë³€ê²½ë˜ì§€ ì•Šë„ë¡ ì•ˆì „í•˜ê²Œ ì€ë‹‰(information hiding)í•˜ê³ 
- íŠ¹ì • í•¨ìˆ˜ì—ê²Œë§Œ ìƒíƒœ ë³€ê²½ì„ í—ˆìš©í•˜ì—¬ ìƒíƒœë¥¼ ì•ˆì „í•˜ê²Œ ë³€ê²½í•˜ê³  ìœ ì§€í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.

```cs
// ğŸ’¡ countë¥¼ ì¦ê°€/ê°ì†Œ ì‹œí‚¬ ìˆ˜ ìˆë„ë¡ ë°œì „ì‹œì¼œë³´ì
const counter = (function() {
  let num = 0;

  // í´ë¡œì €ì¸ ë©”ì„œë“œë¥¼ ê°–ëŠ” ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤.
  // ê°ì²´ ë¦¬í„°ëŸ´ì€ ìŠ¤ì½”í”„ë¥¼ ë§Œë“¤ì§€ ì•ŠëŠ”ë‹¤.
  // ë”°ë¼ì„œ ì•„ë˜ ë©”ì„œë“œë“¤ì˜ ìƒìœ„ ìŠ¤ì½”í”„ëŠ” ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜ì˜ ë ‰ì‹œì»¬ í™˜ê²½ì´ë‹¤.
  return {
    // num: 0, í”„ë¡œí¼í‹°ëŠ” publicí•˜ë¯€ë¡œ ì€ë‹‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
    increase() { // ìƒìœ„ ìŠ¤ì½”í”„ëŠ” í•´ë‹¹ ë©”ì„œë“œê°€ í‰ê°€ë˜ëŠ” ì‹œì ì— ì‹¤í–‰ì¤‘ì¸ ì¦‰ì‹œì‹¤í–‰í•¨ìˆ˜ ì‹¤í–‰ì»¨í…ìŠ¤íŠ¸ì˜ ë ‰ì‹œì»¬í™˜ê²½ì´ë‹¤.
      return ++num;
    },
    decrease() {
      return num > 0 ? --num : 0;
    }
  }
}());

console.log(increase()); // 1
console.log(increase()); // 2
console.log(decrease()); // 1
console.log(decrease()); // 0
```

**í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œ í´ë¡œì €ë¥¼ í™œìš©í•˜ëŠ” ì˜ˆì œ**

- `ì™¸ë¶€ìƒíƒœ ë³€ê²½`ì´ë‚˜ `mutable ë°ì´í„°ë¥¼ í”¼í•˜ê³ ` ë¶ˆë³€ì„±ì„ ì§€í–¥í•˜ëŠ” í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œ ì ê·¹ì ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.

```cs
// âœ… ë³´ì¡°í•¨ìˆ˜(aux)ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ê³  í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ê³ ì°¨í•¨ìˆ˜
// âœ… ì´ í•¨ìˆ˜ëŠ” ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ ë³€ìˆ˜ counterë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•œë‹¤.
function makeCounter(aux) {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ ë³€ìˆ˜
  let counter = 0;

  // makeCounterì˜ ë ‰ì‹œì»¬í™˜ê²½ì„ ìƒìœ„ ìŠ¤ì½”í”„ë¡œì„œ ê¸°ì–µí•˜ëŠ” í´ë¡œì €
  return function() {
    // ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ aux ë³´ì¡°í•¨ìˆ˜ì— ìƒíƒœ ë³€ê²½ì„ ìœ„ì„í•œë‹¤.
    counter = aux(counter);
    return counter;
  };
}

// ë³´ì¡°í•¨ìˆ˜
function increase(n) {
  return ++n;
}
function decrease(n) {
  return --n;
}

// í•¨ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ìƒì„±í•œë‹¤.
// makeCounter í•¨ìˆ˜ëŠ” ë³´ì¡°í•¨ìˆ˜ë¡œ ì¸ìˆ˜ë¥¼ ì „ë‹¬ë°›ì•„ í•¨ìˆ˜ë¥¼ ë°˜í™˜í•œë‹¤.
const increaser = makeCounter(increase);
console.log(increase()); // 1
console.log(increase()); // 2

// âŒ increase í•¨ìˆ˜ì™€ëŠ” ë³„ê°œì˜ ë…ë¦½ëœ ë ‰ì‹œì»¬ í™˜ê²½ì„ ê°–ê¸° ë•Œë¬¸ì— ì¹´ìš´í„° ìƒíƒœê°€ ì—°ë™í•˜ì§€ ì•ŠëŠ”ë‹¤.
const decreaser = makeCounter(decrease);
console.log(decrease()); // -1
console.log(decrease()); // -2
```

- ë…ë¦½ëœ ì¹´ìš´í„°ê°€ ì•„ë‹ˆë¼, ì—°ë™í•˜ì—¬ ì¦ê°ì´ ê°€ëŠ¥í•œ ì¹´ìš´í„°ë¥¼ ë§Œë“¤ë ¤ë©´ **ë ‰ì‹œì»¬ í™˜ê²½ì„ ê³µìœ í•˜ëŠ” í´ë¡œì €**ë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤.
- ì´ë¥¼ ìœ„í•´ì„œëŠ” `makeCounter` í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ì§€ ë§ì•„ì•¼ í•œë‹¤.

```cs
// í•¨ìˆ˜ë¥¼ ë°˜í™˜í•˜ëŠ” ê³ ì°¨í•¨ìˆ˜
// ì´ í•¨ìˆ˜ëŠ” ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ  ë³€ìˆ˜ counterë¥¼ ê¸°ì–µí•˜ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜í•œë‹¤.
const counter = (function () {
  // ì¹´ìš´íŠ¸ ìƒíƒœë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ììœ  ë³€ìˆ˜
  let counter = 0;

  // í•¨ìˆ˜ë¥¼ ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ëŠ” í´ë¡œì €ë¥¼ ë°˜í™˜
  return function (aux) {
    // ì¸ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ë³´ì¡° í•¨ìˆ˜ì— ìƒíƒœ ë³€ê²½ì„ ìœ„ì„í•œë‹¤.
    counter = aux(counter);
    return counter;
  };
}());

// ë³´ì¡°í•¨ìˆ˜
function increase(n) {
  return ++n;
}
function decrease(n) {
  return --n;
}

console.log(counter(increase)); // 1
console.log(counter(increase)); // 2
console.log(counter(decrease)); // 1
console.log(counter(decrease)); // 0
```

### 24.6 ìì£¼ ë°œìƒí•˜ëŠ” ì‹¤ìˆ˜

---

```cs
// âŒ í´ë¡œì €ë¥¼ ì‚¬ìš©í•  ë•Œ ìì£¼ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì‹¤ìˆ˜
var funcs = [];

for(var i = 0; i < 3; i++) {
    funcs[i] = function () { return i; };
}

for (var j = 0; j < funcs.length; j++) {
    console.log(funcs[j]());
}
// 3 3 3
```

í•¨ìˆ˜ê°€ funcs ë°°ì—´ì˜ ìš”ì†Œë¡œ ì¶”ê°€ëœë‹¤. ê·¸ë¦¬ê³  ë‘ë²ˆì§¸ forë¬¸ì˜ ì½”ë“œ ë¸”ë¡ ë‚´ì—ì„œ funcs ë°°ì—´ì˜ ìš”ì†Œë¡œ ì¶”ê°€ëœ í•¨ìˆ˜ë¥¼ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤.

- ì´ë•Œ funcs ë°°ì—´ì˜ ìš”ì†Œë¡œ ì¶”ê°€ëœ 3ê°œì˜ í•¨ìˆ˜ê°€ 0,1,2ë¥¼ ë°˜í™˜í•  ê²ƒìœ¼ë¡œ ê¸°ëŒ€í•˜ì§€ë§Œ, ì•„ì‰½ê²Œë„ ê·¸ë ‡ì§€ëŠ” ì•Šë‹¤.
- forë¬¸ì˜ ë³€ìˆ˜ ì„ ì–¸ë¬¸ì—ì„œ var í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ `i ë³€ìˆ˜`ëŠ” ë¸”ë¡ ë ˆë²¨ ìŠ¤ì½”í”„ê°€ ì•„ë‹Œ `í•¨ìˆ˜ ë ˆë²¨ ìŠ¤ì½”í”„`ë¥¼ ê°–ê¸° ë•Œë¬¸ì— `ì „ì—­ ë³€ìˆ˜`ë‹¤.
- ì „ì—­ ë³€ìˆ˜ iì—ëŠ” ìˆœì°¨ì ìœ¼ë¡œ 0,1,2ê°€ ìˆœì°¨ì ìœ¼ë¡œ í• ë‹¹ë˜ì§€ë§Œ, í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ ì „ì—­ë³€ìˆ˜ ië¥¼ í˜¸ì¶œí•˜ì—¬ iì˜ ê°’ì´ 3ì´ëœë‹¤.

```cs
var funcs = [];

for (var i = 0; i < 3; i++) {
  // 1ï¸âƒ£ ì¦‰ì‹œ ì‹¤í–‰í•¨ìˆ˜ëŠ” ì „ì—­ ë³€ìˆ˜ iì— "í˜„ì¬" í• ë‹¹ ë˜ì–´ ìˆëŠ” ê°’ì„ ì¸ìˆ˜ë¡œ ë°›ì•„ í• ë‹¹í•¨.
  funcs[i] = (function (id) {
    return function() {
      return id;
    };
  }(i)); // idëŠ” ì¤‘ì²©í•¨ìˆ˜ì— ë¬¶ì—¬ ìˆëŠ” ììœ ë³€ìˆ˜ê°€ ë˜ì–´ ê·¸ ê°’ì´ ìœ ì§€ë¨
}

for (var j = 0; j < funcs.length; j++) {
    console.log(funcs[j]());
}

// 0 1 2
```

- ì´ëŠ” í•¨ìˆ˜ë ˆë²¨ ìŠ¤ì½”í”„ íŠ¹ì„±ìœ¼ë¡œ ì¸í•´ forë¬¸ì˜ ë³€ìˆ˜ ì„ ì–¸ë¬¸ì—ì„œ var í‚¤ì›Œë“œë¡œ ì„ ì–¸í•œ ë³€ìˆ˜ê°€ ì „ì—­ ë³€ìˆ˜ê°€ ë˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” í˜„ìƒ
- letì„ ì‚¬ìš©í•˜ë©´ ë²ˆê±°ë¡œì›€ì´ í•´ê²°ëœë‹¤.

```cs
// âœ… letì„ ì‚¬ìš©í•˜ë©´ forë¬¸ì˜ ì½”ë“œë¸”ë¡ì´ ë°˜ë³µ ì‹¤í–‰ë  ë•Œ ë§ˆë‹¤ ìƒˆë¡œìš´ ë ‰ì‹œì»¬ í™˜ê²½ì´ ìƒì„±ëœë‹¤.
// ì´ëŠ” ë°˜ë³µë¬¸ì˜ ì½”ë“œ ë¸”ë¡ ë‚´ë¶€ì—ì„œ í•¨ìˆ˜ë¥¼ ì •ì˜í•  ë•Œ ì˜ë¯¸ê°€ ìˆë‹¤.
const funcs = [];

for (let i = 0; i < 3; i++) {
  funcs[i] = function() { return i; };
}

for (let i = 0; i < funcs.length; i++) {
  console.log(funcs[i]()); // 0 1 2
}
```

- í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ê¸°ë²•ì¸ ê³ ì°¨í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.
- ì´ ë°©ë²•ì€ ë³€ìˆ˜ì™€ ë°˜ë³µë¬¸ì˜ ì‚¬ìš©ì„ ì–µì œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì˜¤ë¥˜ë¥¼ ì¤„ì´ê³  ê°€ë…ì„±ì„ ì¢‹ê²Œ ë§Œë“ ë‹¤.

```cs
// ìš”ì†Œê°€ 3ê°œì¸ ë°°ì—´ì„ ìƒì„±í•˜ê³  ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ë¥¼ ìš”ì†Œë¡œ ì¶”ê°€í•œë‹¤.
// ë°°ì—´ì˜ ìš”ì†Œë¡œ ì¶”ê°€ëœ í•¨ìˆ˜ë“¤ì€ ëª¨ë‘ í´ë¡œì €ë‹¤.
const funcs = Array.from(new Array(3), (_, i) => () => i); // (3) [f,f,f]

// ë°°ì—´ì˜ ìš”ì†Œë¡œ ì¶”ê°€ëœ í•¨ìˆ˜ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ í˜¸ì¶œí•œë‹¤.
funcs.forEach(f => console.log(f())); // 0 1 2
```
